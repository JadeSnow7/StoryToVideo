# =============================================================================
# StoryToVideo Environment Example
# =============================================================================
# Copy this file to ".env" for docker-compose.yml variable overrides.
#
# Deployment model:
# - Single Linux machine with NVIDIA GPU
# - Ollama runs on the host (not in Docker)
# - Model/Gateway/Server/MySQL/Redis/MinIO run in Docker
# =============================================================================

# -----------------------------------------------------------------------------
# LLM (default: host Ollama)
# -----------------------------------------------------------------------------
# Options: ollama (host), groq, deepseek, openrouter
LLM_PROVIDER=ollama
OLLAMA_HOST=http://host.docker.internal:11434
LLM_MODEL=qwen2.5:0.5b

# -----------------------------------------------------------------------------
# Optional cloud provider API keys (leave empty if unused)
# -----------------------------------------------------------------------------
GROQ_API_KEY=
DEEPSEEK_API_KEY=
OPENROUTER_API_KEY=
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_API_TOKEN=
ELEVENLABS_API_KEY=
AZURE_SPEECH_KEY=
AZURE_SPEECH_REGION=eastasia

# -----------------------------------------------------------------------------
# Generation providers (local GPU by default)
# -----------------------------------------------------------------------------
# IMAGE_PROVIDER: local | horde | cloudflare
IMAGE_PROVIDER=local
# TTS_PROVIDER: local | edge | elevenlabs
TTS_PROVIDER=local

# -----------------------------------------------------------------------------
# GPU / device
# -----------------------------------------------------------------------------
DEVICE=cuda
TORCH_CUDA_ALLOC_CONF=max_split_size_mb:128

# -----------------------------------------------------------------------------
# Gateway defaults (used when request does not override)
# -----------------------------------------------------------------------------
SD_IMG_WIDTH=512
SD_IMG_HEIGHT=288
SD_IMG_STEPS=4
SD_CFG_SCALE=1.5

# -----------------------------------------------------------------------------
# SVD (img2vid) defaults (model-side)
# -----------------------------------------------------------------------------
SVD_ENABLED=1
SVD_MAX_FRAMES=10
SVD_STEPS=6
SVD_MAX_SIDE=448
SVD_CPU_OFFLOAD=1
SVD_LOW_VRAM=1

# -----------------------------------------------------------------------------
# IMG2VID request limits + smart fallback (gateway-side)
# -----------------------------------------------------------------------------
IMG2VID_MAX_FRAMES=10
IMG2VID_TIMEOUT=240
IMG2VID_FAIL_FAST=1
IMG2VID_DISABLE_AFTER_FAILURES=1
IMG2VID_VALIDATE_OUTPUT=1
IMG2VID_MIN_BYTES=4096
