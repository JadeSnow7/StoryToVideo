# FRP 配置说明

本目录提供了服务端/客户端穿透云端 `8080` 端口所需的示例配置。

## 角色说明

| 角色 | 运行文件 | 说明 |
| ---- | -------- | ---- |
| frps (云服务器) | `frps.toml` | 监听 `7000`，供所有 frpc 连接 |
| frpc (可访问真实服务端的机器，例如模型端或云服务器本身) | `frpc.toml` | 1) 继续保留原来的 `web` TCP 代理；2) 新增 `server-8080-stcp`，把本地 `127.0.0.1:8080` 注册为 STCP 服务 |
| frpc visitor (客户端本地) | `frpc-visitor.toml` | 通过 STCP 访问 `server-8080-stcp`，把远端 `8080` 映射到本地 `127.0.0.1:18080` |

## 启动步骤

1. **云服务器**：确保 `frps` 已根据 `frps.toml` 启动。
2. **模型端/云端**：在能直连真实 Go 服务的机器上执行：
   ```bash
   cd frp
   ./frpc -c frpc.toml
   ```
   确认日志里 `server-8080-stcp` 注册成功。
3. **客户端本地**：
   ```bash
   cd frp
   ./frpc -c frpc-visitor.toml
   ```
   启动后，本机 `127.0.0.1:18080` 即可访问云端 `8080`。

## 客户端如何使用

将 Qt 客户端的接口地址临时改为：
```
http://127.0.0.1:18080/v1/api/projects
http://127.0.0.1:18080/v1/api/tasks
```
这样访问流程为：客户端 → 本地 18080 → STCP 隧道 → 云端 8080。

当云端 8080 对公网开放后，只需停止 visitor，并把地址改回 `http://119.45.124.222:8080` 即可。
